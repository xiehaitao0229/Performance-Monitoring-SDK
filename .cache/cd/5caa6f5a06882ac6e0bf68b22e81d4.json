{"id":"../src/data/log.ts","dependencies":[{"name":"/Users/xiehaitao/Desktop/yideng/tsconfig.json","includedInParent":true,"mtime":1611841349000},{"name":"/Users/xiehaitao/Desktop/yideng/package.json","includedInParent":true,"mtime":1755233716834},{"name":"../config","loc":{"line":1,"column":23,"index":23},"parent":"/Users/xiehaitao/Desktop/yideng/src/data/log.ts","resolved":"/Users/xiehaitao/Desktop/yideng/src/config/index.ts"},{"name":"../data/reportPerf","loc":{"line":2,"column":27,"index":63},"parent":"/Users/xiehaitao/Desktop/yideng/src/data/log.ts","resolved":"/Users/xiehaitao/Desktop/yideng/src/data/reportPerf.ts"},{"name":"../helpers/utils","loc":{"line":3,"column":27,"index":112},"parent":"/Users/xiehaitao/Desktop/yideng/src/data/log.ts","resolved":"/Users/xiehaitao/Desktop/yideng/src/helpers/utils.ts"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.logMetric = exports.logData = void 0;\nvar _config = require(\"../config\");\nvar _reportPerf = require(\"../data/reportPerf\");\nvar _utils = require(\"../helpers/utils\");\n/**\n * 记录并上报性能指标数据\n * 将传入的指标数据中的数值进行四舍五入处理，然后发送到外部跟踪服务\n *\n * @param measureName - 指标名称，用于标识不同类型的性能数据\n * @param metric - 指标数据对象，包含各种性能指标值\n * @param customProperties - 可选的自定义属性，用于添加额外的上下文信息\n */\nvar logData = exports.logData = function logData(measureName, metric, customProperties) {\n  // 遍历指标对象的所有属性，对数值类型的属性进行精度处理\n  Object.keys(metric).forEach(function (key) {\n    if (typeof metric[key] === 'number') {\n      // 将数值四舍五入到两位小数，提高数据的一致性和可读性\n      metric[key] = (0, _utils.roundByTwo)(metric[key]);\n    }\n  });\n  // 将处理后的指标数据发送到外部跟踪服务\n  (0, _reportPerf.reportPerf)(measureName, metric, customProperties);\n};\n/**\n * 记录并上报性能指标持续时间\n * 将指标持续时间分发到内部日志和外部时间跟踪服务\n *\n * @param duration - 持续时间（毫秒），表示某个操作的执行时间\n * @param measureName - 指标名称，用于标识性能指标类型\n * @param customProperties - 可选的自定义属性，用于添加额外的上下文信息\n */\nvar logMetric = exports.logMetric = function logMetric(duration, measureName, customProperties) {\n  // 将持续时间四舍五入到两位小数\n  var duration2Decimal = (0, _utils.roundByTwo)(duration);\n  // 验证持续时间的有效性：必须在配置的最大时间范围内且为非负数\n  if (duration2Decimal <= _config.config.maxTime && duration2Decimal >= 0) {\n    // 从内部或者外部的报告工具报告指标数据\n    (0, _reportPerf.reportPerf)(measureName, duration2Decimal, customProperties);\n  }\n};"},"sourceMaps":{"js":{"mappings":[{"source":"../src/data/log.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":0}},{"source":"../src/data/log.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":4}},{"source":"../src/data/log.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":11}},{"source":"../src/data/log.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":14}},{"source":"../src/data/log.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":7,"column":21}},{"source":"../src/data/log.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":8,"column":0}},{"source":"../src/data/log.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":8,"column":4}},{"source":"../src/data/log.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":8,"column":15}},{"source":"../src/data/log.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":8,"column":18}},{"source":"../src/data/log.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":8,"column":25}},{"source":"../src/data/log.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":9,"column":0}},{"source":"../src/data/log.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":9,"column":4}},{"source":"../src/data/log.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":9,"column":10}},{"source":"../src/data/log.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":9,"column":13}},{"source":"../src/data/log.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":9,"column":20}},{"source":"../src/data/log.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":10,"column":0}},{"source":"../src/data/log.ts","name":null,"original":{"line":13,"column":7},"generated":{"line":18,"column":0}},{"source":"../src/data/log.ts","name":null,"original":{"line":13,"column":13},"generated":{"line":18,"column":4}},{"source":"../src/data/log.ts","name":null,"original":{"line":13,"column":20},"generated":{"line":18,"column":11}},{"source":"../src/data/log.ts","name":null,"original":{"line":13,"column":20},"generated":{"line":18,"column":14}},{"source":"../src/data/log.ts","name":null,"original":{"line":13,"column":20},"generated":{"line":18,"column":21}},{"source":"../src/data/log.ts","name":null,"original":{"line":13,"column":20},"generated":{"line":18,"column":22}},{"source":"../src/data/log.ts","name":null,"original":{"line":13,"column":20},"generated":{"line":18,"column":29}},{"source":"../src/data/log.ts","name":null,"original":{"line":13,"column":23},"generated":{"line":18,"column":32}},{"source":"../src/data/log.ts","name":null,"original":{"line":13,"column":13},"generated":{"line":18,"column":41}},{"source":"../src/data/log.ts","name":null,"original":{"line":13,"column":20},"generated":{"line":18,"column":48}},{"source":"../src/data/log.ts","name":null,"original":{"line":14,"column":2},"generated":{"line":18,"column":49}},{"source":"../src/data/log.ts","name":null,"original":{"line":14,"column":21},"generated":{"line":18,"column":60}},{"source":"../src/data/log.ts","name":null,"original":{"line":15,"column":2},"generated":{"line":18,"column":62}},{"source":"../src/data/log.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":18,"column":68}},{"source":"../src/data/log.ts","name":null,"original":{"line":16,"column":2},"generated":{"line":18,"column":70}},{"source":"../src/data/log.ts","name":null,"original":{"line":16,"column":27},"generated":{"line":18,"column":86}},{"source":"../src/data/log.ts","name":null,"original":{"line":17,"column":10},"generated":{"line":18,"column":88}},{"source":"../src/data/log.ts","name":null,"original":{"line":18,"column":2},"generated":{"line":19,"column":2}},{"source":"../src/data/log.ts","name":null,"original":{"line":19,"column":2},"generated":{"line":20,"column":2}},{"source":"../src/data/log.ts","name":null,"original":{"line":19,"column":8},"generated":{"line":20,"column":8}},{"source":"../src/data/log.ts","name":null,"original":{"line":19,"column":9},"generated":{"line":20,"column":9}},{"source":"../src/data/log.ts","name":null,"original":{"line":19,"column":13},"generated":{"line":20,"column":13}},{"source":"../src/data/log.ts","name":null,"original":{"line":19,"column":14},"generated":{"line":20,"column":14}},{"source":"../src/data/log.ts","name":null,"original":{"line":19,"column":20},"generated":{"line":20,"column":20}},{"source":"../src/data/log.ts","name":null,"original":{"line":19,"column":21},"generated":{"line":20,"column":21}},{"source":"../src/data/log.ts","name":null,"original":{"line":19,"column":22},"generated":{"line":20,"column":22}},{"source":"../src/data/log.ts","name":null,"original":{"line":19,"column":29},"generated":{"line":20,"column":29}},{"source":"../src/data/log.ts","name":null,"original":{"line":19,"column":30},"generated":{"line":20,"column":30}},{"source":"../src/data/log.ts","name":null,"original":{"line":19,"column":31},"generated":{"line":20,"column":40}},{"source":"../src/data/log.ts","name":null,"original":{"line":19,"column":34},"generated":{"line":20,"column":43}},{"source":"../src/data/log.ts","name":null,"original":{"line":19,"column":38},"generated":{"line":20,"column":45}},{"source":"../src/data/log.ts","name":null,"original":{"line":20,"column":4},"generated":{"line":21,"column":4}},{"source":"../src/data/log.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":21,"column":8}},{"source":"../src/data/log.ts","name":null,"original":{"line":20,"column":15},"generated":{"line":21,"column":15}},{"source":"../src/data/log.ts","name":null,"original":{"line":20,"column":21},"generated":{"line":21,"column":21}},{"source":"../src/data/log.ts","name":null,"original":{"line":20,"column":22},"generated":{"line":21,"column":22}},{"source":"../src/data/log.ts","name":null,"original":{"line":20,"column":25},"generated":{"line":21,"column":25}},{"source":"../src/data/log.ts","name":null,"original":{"line":20,"column":26},"generated":{"line":21,"column":26}},{"source":"../src/data/log.ts","name":null,"original":{"line":20,"column":31},"generated":{"line":21,"column":31}},{"source":"../src/data/log.ts","name":null,"original":{"line":20,"column":39},"generated":{"line":21,"column":39}},{"source":"../src/data/log.ts","name":null,"original":{"line":20,"column":41},"generated":{"line":21,"column":41}},{"source":"../src/data/log.ts","name":null,"original":{"line":21,"column":6},"generated":{"line":22,"column":6}},{"source":"../src/data/log.ts","name":null,"original":{"line":22,"column":6},"generated":{"line":23,"column":6}},{"source":"../src/data/log.ts","name":null,"original":{"line":22,"column":12},"generated":{"line":23,"column":12}},{"source":"../src/data/log.ts","name":null,"original":{"line":22,"column":13},"generated":{"line":23,"column":13}},{"source":"../src/data/log.ts","name":null,"original":{"line":22,"column":16},"generated":{"line":23,"column":16}},{"source":"../src/data/log.ts","name":null,"original":{"line":22,"column":17},"generated":{"line":23,"column":17}},{"source":"../src/data/log.ts","name":null,"original":{"line":22,"column":20},"generated":{"line":23,"column":20}},{"source":"../src/data/log.ts","name":null,"original":{"line":22,"column":20},"generated":{"line":23,"column":24}},{"source":"../src/data/log.ts","name":null,"original":{"line":22,"column":30},"generated":{"line":23,"column":41}},{"source":"../src/data/log.ts","name":null,"original":{"line":22,"column":31},"generated":{"line":23,"column":43}},{"source":"../src/data/log.ts","name":null,"original":{"line":22,"column":37},"generated":{"line":23,"column":49}},{"source":"../src/data/log.ts","name":null,"original":{"line":22,"column":38},"generated":{"line":23,"column":50}},{"source":"../src/data/log.ts","name":null,"original":{"line":22,"column":41},"generated":{"line":23,"column":53}},{"source":"../src/data/log.ts","name":null,"original":{"line":22,"column":42},"generated":{"line":23,"column":54}},{"source":"../src/data/log.ts","name":null,"original":{"line":22,"column":43},"generated":{"line":23,"column":55}},{"source":"../src/data/log.ts","name":null,"original":{"line":23,"column":4},"generated":{"line":24,"column":4}},{"source":"../src/data/log.ts","name":null,"original":{"line":24,"column":2},"generated":{"line":25,"column":2}},{"source":"../src/data/log.ts","name":null,"original":{"line":24,"column":3},"generated":{"line":25,"column":3}},{"source":"../src/data/log.ts","name":null,"original":{"line":24,"column":4},"generated":{"line":25,"column":4}},{"source":"../src/data/log.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":26,"column":2}},{"source":"../src/data/log.ts","name":null,"original":{"line":27,"column":2},"generated":{"line":27,"column":2}},{"source":"../src/data/log.ts","name":null,"original":{"line":27,"column":2},"generated":{"line":27,"column":6}},{"source":"../src/data/log.ts","name":null,"original":{"line":27,"column":12},"generated":{"line":27,"column":28}},{"source":"../src/data/log.ts","name":null,"original":{"line":27,"column":13},"generated":{"line":27,"column":30}},{"source":"../src/data/log.ts","name":null,"original":{"line":27,"column":24},"generated":{"line":27,"column":41}},{"source":"../src/data/log.ts","name":null,"original":{"line":27,"column":26},"generated":{"line":27,"column":43}},{"source":"../src/data/log.ts","name":null,"original":{"line":27,"column":32},"generated":{"line":27,"column":49}},{"source":"../src/data/log.ts","name":null,"original":{"line":27,"column":34},"generated":{"line":27,"column":51}},{"source":"../src/data/log.ts","name":null,"original":{"line":27,"column":50},"generated":{"line":27,"column":67}},{"source":"../src/data/log.ts","name":null,"original":{"line":27,"column":51},"generated":{"line":27,"column":68}},{"source":"../src/data/log.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"../src/data/log.ts","name":null,"original":{"line":28,"column":1},"generated":{"line":28,"column":1}},{"source":"../src/data/log.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":29,"column":0}},{"source":"../src/data/log.ts","name":null,"original":{"line":38,"column":7},"generated":{"line":37,"column":0}},{"source":"../src/data/log.ts","name":null,"original":{"line":38,"column":13},"generated":{"line":37,"column":4}},{"source":"../src/data/log.ts","name":null,"original":{"line":38,"column":22},"generated":{"line":37,"column":13}},{"source":"../src/data/log.ts","name":null,"original":{"line":38,"column":22},"generated":{"line":37,"column":16}},{"source":"../src/data/log.ts","name":null,"original":{"line":38,"column":22},"generated":{"line":37,"column":23}},{"source":"../src/data/log.ts","name":null,"original":{"line":38,"column":22},"generated":{"line":37,"column":24}},{"source":"../src/data/log.ts","name":null,"original":{"line":38,"column":22},"generated":{"line":37,"column":33}},{"source":"../src/data/log.ts","name":null,"original":{"line":38,"column":25},"generated":{"line":37,"column":36}},{"source":"../src/data/log.ts","name":null,"original":{"line":38,"column":13},"generated":{"line":37,"column":45}},{"source":"../src/data/log.ts","name":null,"original":{"line":38,"column":22},"generated":{"line":37,"column":54}},{"source":"../src/data/log.ts","name":null,"original":{"line":39,"column":2},"generated":{"line":37,"column":55}},{"source":"../src/data/log.ts","name":null,"original":{"line":39,"column":18},"generated":{"line":37,"column":63}},{"source":"../src/data/log.ts","name":null,"original":{"line":40,"column":2},"generated":{"line":37,"column":65}},{"source":"../src/data/log.ts","name":null,"original":{"line":40,"column":21},"generated":{"line":37,"column":76}},{"source":"../src/data/log.ts","name":null,"original":{"line":41,"column":2},"generated":{"line":37,"column":78}},{"source":"../src/data/log.ts","name":null,"original":{"line":41,"column":27},"generated":{"line":37,"column":94}},{"source":"../src/data/log.ts","name":null,"original":{"line":42,"column":10},"generated":{"line":37,"column":96}},{"source":"../src/data/log.ts","name":null,"original":{"line":43,"column":2},"generated":{"line":38,"column":2}},{"source":"../src/data/log.ts","name":null,"original":{"line":44,"column":2},"generated":{"line":39,"column":2}},{"source":"../src/data/log.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":39,"column":6}},{"source":"../src/data/log.ts","name":null,"original":{"line":44,"column":24},"generated":{"line":39,"column":22}},{"source":"../src/data/log.ts","name":null,"original":{"line":44,"column":27},"generated":{"line":39,"column":25}},{"source":"../src/data/log.ts","name":null,"original":{"line":44,"column":27},"generated":{"line":39,"column":29}},{"source":"../src/data/log.ts","name":null,"original":{"line":44,"column":37},"generated":{"line":39,"column":46}},{"source":"../src/data/log.ts","name":null,"original":{"line":44,"column":38},"generated":{"line":39,"column":48}},{"source":"../src/data/log.ts","name":null,"original":{"line":44,"column":46},"generated":{"line":39,"column":56}},{"source":"../src/data/log.ts","name":null,"original":{"line":44,"column":47},"generated":{"line":39,"column":57}},{"source":"../src/data/log.ts","name":null,"original":{"line":46,"column":2},"generated":{"line":40,"column":2}},{"source":"../src/data/log.ts","name":null,"original":{"line":47,"column":2},"generated":{"line":41,"column":2}},{"source":"../src/data/log.ts","name":null,"original":{"line":47,"column":6},"generated":{"line":41,"column":6}},{"source":"../src/data/log.ts","name":null,"original":{"line":47,"column":22},"generated":{"line":41,"column":22}},{"source":"../src/data/log.ts","name":null,"original":{"line":47,"column":26},"generated":{"line":41,"column":26}},{"source":"../src/data/log.ts","name":null,"original":{"line":47,"column":32},"generated":{"line":41,"column":40}},{"source":"../src/data/log.ts","name":null,"original":{"line":47,"column":33},"generated":{"line":41,"column":41}},{"source":"../src/data/log.ts","name":null,"original":{"line":47,"column":40},"generated":{"line":41,"column":48}},{"source":"../src/data/log.ts","name":null,"original":{"line":47,"column":44},"generated":{"line":41,"column":52}},{"source":"../src/data/log.ts","name":null,"original":{"line":47,"column":60},"generated":{"line":41,"column":68}},{"source":"../src/data/log.ts","name":null,"original":{"line":47,"column":64},"generated":{"line":41,"column":72}},{"source":"../src/data/log.ts","name":null,"original":{"line":47,"column":65},"generated":{"line":41,"column":73}},{"source":"../src/data/log.ts","name":null,"original":{"line":47,"column":67},"generated":{"line":41,"column":75}},{"source":"../src/data/log.ts","name":null,"original":{"line":48,"column":4},"generated":{"line":42,"column":4}},{"source":"../src/data/log.ts","name":null,"original":{"line":49,"column":4},"generated":{"line":43,"column":4}},{"source":"../src/data/log.ts","name":null,"original":{"line":49,"column":4},"generated":{"line":43,"column":8}},{"source":"../src/data/log.ts","name":null,"original":{"line":49,"column":14},"generated":{"line":43,"column":30}},{"source":"../src/data/log.ts","name":null,"original":{"line":49,"column":15},"generated":{"line":43,"column":32}},{"source":"../src/data/log.ts","name":null,"original":{"line":49,"column":26},"generated":{"line":43,"column":43}},{"source":"../src/data/log.ts","name":null,"original":{"line":49,"column":28},"generated":{"line":43,"column":45}},{"source":"../src/data/log.ts","name":null,"original":{"line":49,"column":44},"generated":{"line":43,"column":61}},{"source":"../src/data/log.ts","name":null,"original":{"line":49,"column":46},"generated":{"line":43,"column":63}},{"source":"../src/data/log.ts","name":null,"original":{"line":49,"column":62},"generated":{"line":43,"column":79}},{"source":"../src/data/log.ts","name":null,"original":{"line":49,"column":63},"generated":{"line":43,"column":80}},{"source":"../src/data/log.ts","name":null,"original":{"line":50,"column":2},"generated":{"line":44,"column":2}},{"source":"../src/data/log.ts","name":null,"original":{"line":51,"column":0},"generated":{"line":45,"column":0}},{"source":"../src/data/log.ts","name":null,"original":{"line":51,"column":1},"generated":{"line":45,"column":1}}],"sources":{"../src/data/log.ts":"import { config } from '../config';\nimport { reportPerf } from '../data/reportPerf';\nimport { roundByTwo } from '../helpers/utils';\n\n/**\n * 记录并上报性能指标数据\n * 将传入的指标数据中的数值进行四舍五入处理，然后发送到外部跟踪服务\n * \n * @param measureName - 指标名称，用于标识不同类型的性能数据\n * @param metric - 指标数据对象，包含各种性能指标值\n * @param customProperties - 可选的自定义属性，用于添加额外的上下文信息\n */\nexport const logData = (\n  measureName: string,\n  metric: any,\n  customProperties?: object\n): void => {\n  // 遍历指标对象的所有属性，对数值类型的属性进行精度处理\n  Object.keys(metric).forEach((key) => {\n    if (typeof metric[key] === 'number') {\n      // 将数值四舍五入到两位小数，提高数据的一致性和可读性\n      metric[key] = roundByTwo(metric[key]);\n    }\n  });\n  \n  // 将处理后的指标数据发送到外部跟踪服务\n  reportPerf(measureName, metric, customProperties);\n};\n\n/**\n * 记录并上报性能指标持续时间\n * 将指标持续时间分发到内部日志和外部时间跟踪服务\n * \n * @param duration - 持续时间（毫秒），表示某个操作的执行时间\n * @param measureName - 指标名称，用于标识性能指标类型\n * @param customProperties - 可选的自定义属性，用于添加额外的上下文信息\n */\nexport const logMetric = (\n  duration: number,\n  measureName: string,\n  customProperties?: object\n): void => {\n  // 将持续时间四舍五入到两位小数\n  const duration2Decimal = roundByTwo(duration);\n  \n  // 验证持续时间的有效性：必须在配置的最大时间范围内且为非负数\n  if (duration2Decimal <= config.maxTime && duration2Decimal >= 0) {\n    // 从内部或者外部的报告工具报告指标数据\n    reportPerf(measureName, duration2Decimal, customProperties);\n  }\n};\n"},"lineCount":null}},"error":null,"hash":"c4485b11f686fec558d04e4399299d01","cacheData":{"env":{}}}